#!/bin/bash

#This script removes the files that have same md5 hash values in the folder whose path specified in DIR variable below 

DIR="/home/melih/Desktop/storage/Android_Dataset/Dataset/asm_output/bngn"

cd $DIR

for entry1 in `ls -S $DIR/*`;
do
	flag=0
	filename1=$(basename $entry1)
	if test -f "$filename1";
	then
		file1_hash=$(md5sum $filename1 | cut -d ' ' -f 1)
		for entry2 in `ls -S $DIR/*`;
		do
			filename2=$(basename $entry2)
			if [ "$filename1" != "$filename2" ] && [ $flag == 1 ]
			then
				file2_hash=$(md5sum $filename2 | cut -d ' ' -f 1)
				if [ "$file1_hash" == "$file2_hash" ]
				then
					echo "$filename1 and $filename2 are same"
					rm $filename2
					echo "$filename2 removed"
				else
					echo "$filename1 and $filename2 are not same"
					
					if [ $flag == 1 ]
					then
						break
					fi
				fi
			elif [ "$filename1" == "$filename2" ]
			then
				flag=1
			fi
		done
	fi
done